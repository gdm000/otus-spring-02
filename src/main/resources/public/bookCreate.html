<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Book create</title>
    <style type="text/css">
        body {
            padding: 50px;
        }
    </style>
    <script src="webjars/vue/2.5.16/vue.min.js"></script>

</head>
<body>

<form action="/books/create" method="post" id="book-create">
    Name:<br>
    <input type="text" name="name"value=""><br>
    Genre:<br>
    <select name="genre_id">
        <option v-for="genre in genres">
            {{genre.name}}
        </option>
    </select><br>
    Author:<br>
    <select name="author_id">
        <option v-for="author in authors" v-bind:value="author.id">
            {{author.name}}
        </option>
    </select><br>
    <input type="submit" value="Create">
</form>
<script>
            fetch('/genres')
                .then(response => response.json())
                .then(genres => {
                    fetch('/authors')
                        .then(response => response.json())
                        .then(authors => {
                            new Vue({
                                el: '#book-create',
                                data: {
                                    genres: genres,
                                    authors: authors
                                }
                            })
                        });
                });

</script>
</body>
</html>
